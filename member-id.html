<!DOCTYPE html>
<html lang="si">
<head>
  <meta charset="utf-8">
  <title>Search Member ID - Freelancing.lk</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <style>
    body { background-color: #0b1220; color: #fff; font-family: 'Segoe UI', sans-serif; margin: 0; padding: 15px; }
    .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
    .logo-area { display: flex; align-items: center; gap: 10px; }
    .logo-box { background: #38bdf8; color: #000; padding: 5px 10px; border-radius: 8px; font-weight: bold; }
    .home-btn { background: #1e293b; color: #fff; padding: 8px 15px; border-radius: 20px; text-decoration: none; border: 1px solid #334155; }

    .main-card { background: #fff; color: #000; border-radius: 30px; padding: 25px; max-width: 600px; margin: 0 auto; box-shadow: 0 10px 25px rgba(0,0,0,0.3); }
    
    .tabs { display: flex; background: #000; padding: 5px; border-radius: 30px; margin-bottom: 20px; }
    .tab { flex: 1; text-align: center; color: white; padding: 10px; font-size: 0.8rem; border-radius: 25px; text-decoration: none; }
    .active-tab { background: #38bdf8; color: black; font-weight: bold; }

    .search-box { display: flex; gap: 10px; margin-top: 20px; }
    input { flex: 1; padding: 12px; border: 1px solid #cbd5e1; border-radius: 12px; background: #f8fafc; }
    .search-btn { background: #000; color: #fff; border: none; padding: 0 20px; border-radius: 12px; cursor: pointer; }
    .clear-btn { background: none; border: 1px solid #cbd5e1; padding: 5px 15px; border-radius: 15px; margin-top: 10px; cursor: pointer; font-size: 0.8rem; }

    .result-table { width: 100%; border-collapse: collapse; margin-top: 20px; border: 1px solid #e2e8f0; border-radius: 12px; overflow: hidden; }
    th { background: #000; color: #fff; text-align: left; padding: 12px; font-size: 0.8rem; }
    td { padding: 12px; border-bottom: 1px solid #e2e8f0; font-size: 0.9rem; font-weight: bold; }
    
    .no-result { text-align: center; padding: 20px; color: #64748b; display: none; }
    footer { text-align: center; margin-top: 40px; font-size: 0.7rem; color: #64748b; line-height: 1.6; }
  </style>
</head>
<body>

<div class="header">
  <div class="logo-area">
    <div class="logo-box">FL</div>
    <div>
      <strong style="display:block; font-size:1.1rem; letter-spacing:1px;">FREELANCING.LK</strong>
      <small style="color:#64748b;">Project of Business HUB Sri Lanka</small>
    </div>
  </div>
  <a href="index.html" class="home-btn"> Home</a>
</div>

<h2 style="text-align:center;">My Member ID සාමාජික අංකය</h2>
<p style="text-align:center; font-size:0.9rem; color:#cbd5e1; margin-bottom:30px;">ඔබ ලියාපදිංචි වූ පසු ඔබගේ Member ID සහ සම්බන්ධ විස්තර මෙතැනින් ලබාගන්න.</p>

<div class="main-card">
  <div class="tabs">
    <a href="register.html" class="tab">Register<br><small>Freelancer Form</small></a>
    <a href="#" class="tab active-tab">Members<br><small>Name & Member ID</small></a>
    <a href="wallet.html" class="tab">Wallet<br><small>Profile by NIC</small></a>
  </div>

  <h3>Members</h3>
  <p style="font-size:0.8rem; color:#64748b;">සාමාජික ලැයිස්තුව - ඔබගේ නම ඇතුළත් කර Member ID එක බලාගත හැක.</p>

  <div class="search-box">
    <input type="text" id="searchInput" placeholder="ඔබේ නම මෙහි ටයිප් කරන්න...">
    <button class="search-btn" onclick="searchMember()">Search</button>
  </div>
  <button class="clear-btn" onclick="clearSearch()">Clear</button>

  <table class="result-table" id="resultTable" style="display:none;">
    <thead>
      <tr>
        <th>NAME</th>
        <th>MEMBER ID</th>
      </tr>
    </thead>
    <tbody id="tableBody">
      </tbody>
  </table>

  <div id="noResult" class="no-result">නමක් සොයාගත නොහැකි විය. කරුණාකර නිවැරදි නම ඇතුළත් කරන්න.</div>
</div>

<footer>
  TechLabs Innovative Solutions International (Pvt) Ltd (Business HUB Sri Lanka)<br>
  "Freelancing.lk" ඔන්ලයින් රැකියා ව්‍යාපාරයේ තවත් එක් සමාජ මෙහෙවරකි. © 2006-2026<br>
  ධනේෂ් මධුරංග එදිරිසූරිය විසින් සිදුකරන ලද නිර්මාණයකි.
</footer>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<script>
  // Firebase Configuration
  const firebaseConfig = {
    apiKey: "AIzaSyB01A6SNm1wW7YVDzHjNGFSZIZekMQ4Wo0",
    authDomain: "frelance-work.firebaseapp.com",
    databaseURL: "https://frelance-work-default-rtdb.asia-southeast1.firebasedatabase.app",
    projectId: "frelance-work",
    storageBucket: "frelance-work.firebasestorage.app",
    messagingSenderId: "414755878034",
    appId: "1:414755878034:web:a2498b02415ae25e52e24b"
  };

  firebase.initializeApp(firebaseConfig);
  const database = firebase.database();

  async function searchMember() {
    const input = document.getElementById('searchInput').value.trim().toLowerCase();
    const table = document.getElementById('resultTable');
    const tableBody = document.getElementById('tableBody');
    const noResult = document.getElementById('noResult');

    if (input === "") {
        alert("කරුණාකර නමක් ඇතුළත් කරන්න.");
        return;
    }

    tableBody.innerHTML = "";
    table.style.display = "none";
    noResult.style.display = "none";

    try {
      // Firebase හි 'members' කොටසේ ඇති සියලුම දත්ත ලබාගැනීම
      const snapshot = await database.ref('members').once('value');
      const data = snapshot.val();

      let found = false;

      if (data) {
        for (let nic in data) {
          const member = data[nic];
          // නම ගැලපේදැයි පරීක්ෂා කිරීම (Partial match)
          if (member.name.toLowerCase().includes(input)) {
            const row = `<tr>
              <td>${member.name}</td>
              <td style="color:#1d4ed8;">${member.memberId}</td>
            </tr>`;
            tableBody.innerHTML += row;
            found = true;
          }
        }
      }

      if (found) {
        table.style.display = "table";
      } else {
        noResult.style.display = "block";
      }

    } catch (error) {
      console.error(error);
      alert("දත්ත සෙවීමේදී දෝෂයක් ඇති විය.");
    }
  }

  function clearSearch() {
    document.getElementById('searchInput').value = "";
    document.getElementById('resultTable').style.display = "none";
    document.getElementById('noResult').style.display = "none";
  }
</script>

</body>
</html>

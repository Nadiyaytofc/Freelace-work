<!DOCTYPE html>
<html lang="si">
<head>
  <meta charset="utf-8">
  <title>eWallet / Profile - Freelance work</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0">
  
  <style>
    body { background-color: #0b1220; color: #fff; font-family: 'Segoe UI', sans-serif; margin: 0; padding: 0; }
    .container { max-width: 600px; margin: 0 auto; padding: 20px; padding-bottom: 80px; }
    
    header { display: flex; justify-content: space-between; align-items: center; padding-bottom: 20px; border-bottom: 1px solid #1e293b; }
    .logo-box { display: flex; align-items: center; gap: 10px; }
    .logo-icon { background: #38bdf8; color: #000; font-weight: 900; padding: 8px 12px; border-radius: 8px; font-size: 1.2rem; }
    .logo-text { line-height: 1.2; }
    .logo-title { font-weight: bold; font-size: 1rem; display: block; }
    .logo-subtitle { font-size: 0.65rem; color: #94a3b8; }
    .home-btn { background: #1e293b; color: #fff; padding: 8px 15px; border-radius: 8px; text-decoration: none; border: 1px solid #334155; font-size: 0.85rem; display: flex; align-items: center; gap: 5px; }

    .main-title { margin-top: 30px; font-size: 1.5rem; font-weight: bold; }
    .main-title span { color: #38bdf8; }
    
    .profile-card { background: #fff; color: #334155; padding: 25px; border-radius: 30px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
    .tabs { display: flex; background: #000; padding: 5px; border-radius: 50px; margin-bottom: 25px; gap: 5px; }
    .tab { flex: 1; text-align: center; color: white; padding: 10px 5px; font-size: 0.65rem; border-radius: 50px; text-decoration: none; display: flex; flex-direction: column; justify-content: center; line-height: 1.2; }
    .active-tab { background: #38bdf8; color: black; font-weight: bold; }
    
    .input-group { margin-bottom: 20px; }
    .input-group label { display: block; font-weight: bold; font-size: 0.85rem; margin-bottom: 8px; color: #1e293b; }
    .input-group input { width: 100%; padding: 15px; border: 1px solid #cbd5e1; border-radius: 12px; box-sizing: border-box; font-size: 0.9rem; background: #f8fafc; color: #000; }
    .btn-show { background: #000; color: #fff; width: 100%; padding: 16px; border: none; border-radius: 12px; font-weight: bold; cursor: pointer; font-size: 0.9rem; display: flex; justify-content: center; align-items: center; gap: 10px; }

    /* Result Styling & Photo */
    #profile-result { display: none; margin-top: 25px; background: #fff; border-radius: 20px; padding: 15px; border: 1px solid #e2e8f0; }
    
    .profile-photo-wrapper { text-align: center; margin-bottom: 15px; }
    .user-profile-img { width: 110px; height: 110px; border-radius: 50%; border: 4px solid #38bdf8; object-fit: cover; box-shadow: 0 5px 15px rgba(0,0,0,0.2); }

    .profile-header-nic { color: #38bdf8; font-weight: 800; font-size: 1.2rem; margin-bottom: 15px; text-align: center; }
    
    .info-table { width: 100%; border-collapse: collapse; margin-bottom: 15px; }
    .info-table th { background: #0f172a; color: #fff; text-align: left; padding: 10px; font-size: 0.8rem; }
    .info-table td { padding: 10px; border-bottom: 1px solid #f1f5f9; font-size: 0.85rem; color: #1e293b; font-weight: 600; }
    .info-table tr td:first-child { color: #64748b; font-weight: normal; width: 40%; }

    .status-box { background: #000; color: #fff; padding: 15px; border-radius: 15px; margin-bottom: 15px; text-align: left; }
    .status-title { font-size: 0.7rem; text-transform: uppercase; color: #94a3b8; margin-bottom: 5px; display: block; }
    .status-msg { font-weight: bold; font-size: 0.85rem; }

    .balance-box { background: #000; color: #fff; padding: 20px; border-radius: 15px; position: relative; }
    .balance-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
    .bal-label { font-size: 0.85rem; font-weight: bold; }
    .bal-value { font-size: 1.2rem; font-weight: 900; color: #38bdf8; }
    .bal-desc { font-size: 0.7rem; color: #94a3b8; line-height: 1.4; border-top: 1px solid #1e293b; padding-top: 10px; margin-top: 5px; }

    .payment-section { margin-top: 40px; border: 1px solid #1e293b; border-radius: 15px; padding: 20px; background: rgba(15, 23, 42, 0.5); }
    .payment-title { font-weight: bold; color: #38bdf8; font-size: 1.1rem; margin-bottom: 15px; }
    .payment-body { font-size: 0.85rem; line-height: 1.6; color: #cbd5e1; }
    .btn-receipt { background: #38bdf8; color: #000; border: none; padding: 12px; border-radius: 50px; font-weight: bold; margin-top: 15px; cursor: pointer; width: 100%; text-decoration: none; display: inline-block; text-align: center; }

    footer { text-align: center; margin-top: 40px; font-size: 0.7rem; color: #475569; padding: 20px; border-top: 1px solid #1e293b; }
    
    .loader { border: 3px solid #f3f3f3; border-top: 3px solid #38bdf8; border-radius: 50%; width: 20px; height: 20px; animation: spin 1s linear infinite; display: none; }
    @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
  </style>
</head>
<body>

<div class="container">
  <header>
    <div class="logo-box">
      <div class="logo-icon">FW</div>
      <div class="logo-text">
        <span class="logo-title">FREELANCE WORK</span>
        <span class="logo-subtitle">Project of Business HUB Sri Lanka</span>
      </div>
    </div>
    <a href="index.html" class="home-btn"> Home</a>
  </header>

  <h2 class="main-title">eWallet <span>වැටුප්</span></h2>

  <div class="profile-card">
    <div class="tabs">
      <a href="register.html" class="tab">Register<span>Freelancer Form</span></a>
      <a href="#" class="tab" style="background: #1e293b;">Members<span>Name & Member ID</span></a>
      <a href="wallet.html" class="tab active-tab">Wallet<span>Profile by NIC</span></a>
    </div>

    <div id="search-section">
      <h3 style="margin-top:0;">Wallet / Profile</h3>
      <div class="input-group">
        <label>NIC (Profile සෙවීමට)</label>
        <input type="text" id="searchNic" placeholder="Eg: xxxxxxxxx">
      </div>
      <button class="btn-show" id="searchBtn" onclick="searchProfile()">
        <span id="btnLabel">Wallet එක පෙන්වන්න</span>
        <div class="loader" id="searchLoader"></div>
      </button>
    </div>

    <div id="profile-result">
      <div class="profile-photo-wrapper">
         <img id="res-photo" src="https://via.placeholder.com/110" class="user-profile-img">
      </div>

      <div class="profile-header-nic">Member NIC: <span id="res-nic-display"></span></div>
      
      <table class="info-table">
        <thead>
          <tr><th>FIELD</th><th>VALUE</th></tr>
        </thead>
        <tbody>
          <tr><td>Member ID</td><td id="res-id"></td></tr>
          <tr><td>Real Name</td><td id="res-name"></td></tr>
          <tr><td>WhatsApp No</td><td id="res-whatsapp"></td></tr>
          <tr><td>District</td><td id="res-district"></td></tr>
        </tbody>
      </table>

      <div class="status-box">
        <span class="status-title">ACCOUNT ACTIVATION STATUS</span>
        <div class="status-msg" id="res-status">Loading...</div>
      </div>

      <div class="balance-box">
        <div class="balance-row">
          <span class="bal-label">Register Bonus :</span>
          <span class="bal-value">Rs.500</span>
        </div>
        <div class="balance-row">
          <span class="bal-label">Wallet Balance :</span>
          <span class="bal-value" id="res-balance">Rs.0</span>
        </div>
        <div class="bal-desc">
          ඔබ මුල් ජොබ් 500 අවසන් කළ පසුව ඉහත බෝනස් එක හිමිවේ. Wallet Balance එක Rs.50ට වැඩිනම් ඔබට කැමති මොහොතක Withdraw කළ හැක.
        </div>
      </div>
    </div>
  </div>

  <div class="payment-section">
    <div class="payment-title">ඔබගේ තොරතුරු වැරදිද? <span style="color:#fff;">නිවැරදි කරගන්න අවශ්‍ය ද ?</span></div>
    <div class="payment-body">
      Submit කිරීමට පෙර තොරතුරු නිවැරදි බව ඔබ විසින් සනාථ කරන නිසා ඔබට පසුව ඒවා නිවැරදි කිරීමට අවශ්‍ය නම් ඒ සදහා රු.100ක ගාස්තුවක් ගෙවීමට සිදුවේ.
    </div>
    <a href="https://wa.me/94740952053" class="btn-receipt">රිසිට්පත එවන්න - 0740952053</a>
  </div>

  <footer>
     NH TECH ACCDAMY (Pvt) Ltd (Business HUB Sri Lanka)<br>
     © Copyright 2006-2026 | නදිල් හංසජ මහතා විසින් සිදුකරන ලද නිර්මාණයකි.
  </footer>
</div>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<script>
  const firebaseConfig = {
    apiKey: "AIzaSyB01A6SNm1wW7YVDzHjNGFSZIZekMQ4Wo0",
    authDomain: "frelance-work.firebaseapp.com",
    databaseURL: "https://frelance-work-default-rtdb.asia-southeast1.firebasedatabase.app",
    projectId: "frelance-work",
    storageBucket: "frelance-work.firebasestorage.app",
    messagingSenderId: "414755878034",
    appId: "1:414755878034:web:a2498b02415ae25e52e24b"
  };

  firebase.initializeApp(firebaseConfig);
  const database = firebase.database();

  function searchProfile() {
    const nicInput = document.getElementById('searchNic').value.trim();
    const resultDiv = document.getElementById('profile-result');
    const loader = document.getElementById('searchLoader');
    const btnLabel = document.getElementById('btnLabel');

    if (!nicInput) {
      alert("කරුණාකර NIC අංකය ඇතුළත් කරන්න.");
      return;
    }

    loader.style.display = 'block';
    btnLabel.style.display = 'none';

    database.ref('members/' + nicInput).once('value')
      .then((snapshot) => {
        if (snapshot.exists()) {
          const user = snapshot.val();
          
          // දත්ත ඇතුළත් කිරීම
          document.getElementById('res-nic-display').innerText = nicInput;
          document.getElementById('res-name').innerText = user.name;
          document.getElementById('res-id').innerText = user.memberId || "Pending";
          document.getElementById('res-whatsapp').innerText = user.whatsapp;
          document.getElementById('res-district').innerText = user.district;
          document.getElementById('res-balance').innerText = "Rs." + (user.balance || "0");
          
          // Photo එක පෙන්වීම
          if(user.photo) {
              document.getElementById('res-photo').src = user.photo;
          } else {
              document.getElementById('res-photo').src = "https://via.placeholder.com/110?text=No+Photo";
          }
          
          const statusElement = document.getElementById('res-status');
          if (parseInt(user.jobsCompleted) >= 10) {
            statusElement.innerText = "Verified. ඔබගේ ගිණුම සක්‍රීයයි.";
            statusElement.style.color = "#22c55e";
          } else {
            statusElement.innerText = "Not Verified. ඔබ ජොබ් 10ක් අවසන් කළ පසු ගිණුම Verify කරනු ලැබේ.";
            statusElement.style.color = "#fbbf24";
          }
          
          resultDiv.style.display = 'block';
          window.scrollTo({ top: resultDiv.offsetTop - 50, behavior: 'smooth' });
        } else {
          alert("මෙම NIC අංකය පද්ධතියේ හමු නොවීය.");
          resultDiv.style.display = 'none';
        }
      })
      .catch((error) => {
        alert("දෝෂයක් ඇති විය.");
      })
      .finally(() => {
        loader.style.display = 'none';
        btnLabel.style.display = 'block';
      });
  }
</script>

</body>
</html>
